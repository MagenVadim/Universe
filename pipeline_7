 def skipRemainingStages = true
 
 pipeline {
    agent any
    parameters {
        choice(
            choices: ['all' , 'C', 'Python', 'Bash'],
            description: '',
            name: 'LANGUAGE')
    }
    
   stages {  
                 
        stage ('C') {
          steps{
           script {
            if (params.LANGUAGE == 'C'){
               echo "running scripts in C lanuage!"
               sh '${WORKSPACE}/scripts/a.out'
                }
            if (params.LANGUAGE == 'Python'){
               echo "running scripts in Python lanuage!"
               sh 'python3 ${WORKSPACE}/scripts/scr_p.pu'
                }
            if (params.LANGUAGE == 'Bash'){
               echo "running scripts in Bash language"
               sh '''
               ${WORKSPACE}/scripts/amount.sh
               TEST=`${WORKSPACE}/scripts/amount.sh`
               cd ${WORKSPACE}/scripts
               touch ${WORKSPACE}/scripts/results.txt
               chmod 777 ${WORKSPACE}/scripts/results.txt
               echo "$TEST" > ${WORKSPACE}/scripts/results.txt
               '''
               echo 'parameters is $TEST'
                }
            if (params.LANGUAGE == 'all') {
               echo "running scripts in all language: C, Python, Bash language"
               sh '${WORKSPACE}/scripts/a.out'
               sh 'python3 ${WORKSPACE}/scripts/scr_p.pu'
               sh '${WORKSPACE}/scripts/amount.sh'
               }
      }
    }
  }
      
        stage ('Python') {
          steps{
            script {
                 if (params.LANGUAGE == 'C'){
               echo "22 steps - Hello, LANGUAGE, C"
                }
             if (params.LANGUAGE == 'Python'){
               echo "22 steps - Hello, LANGUAGE, Python"
                }
             if (params.LANGUAGE == 'Bash'){
               echo "22 steps - Hello, LANGUAGE, Bash"
                }
             if (params.LANGUAGE == 'all') {
               echo "22 steps - Hello, ALL LANGUAGE"
               }
            }
        }
    }
        
        stage ('Bash') {
            when { expression { return params.LANGUAGE == 'Bash'} }
            steps { echo "Hello, LANGUAGE, Bash"
            sh '''
            ${WORKSPACE}/scripts/23_water.sh $USER
            '''
 }}

stage ('ALL Language') {
            when { allOf {
                    expression { params.LANGUAGE != 'all' }
                    expression { params.LANGUAGE != 'C' }
                    expression { params.LANGUAGE != 'Python' }
                    expression { params.LANGUAGE != 'Bash' }
                } }
 steps { 
              echo "Hello, ALL LANGUAGE"
              sh '''
                ${WORKSPACE}/scripts/23_water.sh $USER
              '''
            }
        }



        }
    }
